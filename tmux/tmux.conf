# ~/.tmux.conf

# ------------------------------------------------------------------------------
# General
# ------------------------------------------------------------------------------

# Set prefix to ctrl+a.
set-option -g prefix C-a
bind-key C-a send-prefix
unbind-key C-b

# Enable xterm-style function key sequences.
set-window-option -g xterm-keys on

# Enable mouse.
set-option -g mouse on

# Set faster command sequences.
set-option -s escape-time 0

# Set slower repeat timeout.
set-option -sg repeat-time 1000

# Set smaller history buffer.
set-option -g history-limit 10000

# Enable focus event.
set-option -s focus-events on

# Start windows and panes numbering at 1.
set-option -g base-index 1
set-window-option -g pane-base-index 1

# Renumber windows when a window is closed.
set-option -g renumber-windows on

# Rename window to reflect current program.
set-window-option -g automatic-rename on

# ------------------------------------------------------------------------------
# Display
# ------------------------------------------------------------------------------

# Set the terminal title.
set-option -g set-titles on
set-option -g set-titles-string 'tmux: #S #I #P: #W'

# Enable visual notification.
set-option -g monitor-activity on
set-option -g visual-activity on

# Enable 256 color terminal.
set-option -s default-terminal 'screen-256color'

# Enable 24-bit color.
set-option -sa terminal-overrides ',*256col*:Tc'

# Set the colorscheme.
# Modified from https://github.com/egel/tmux-gruvbox

# Set status bar style.
set-option -g status-interval 10
set-option -g status-left '#[bg=colour241,fg=colour248] #S #I #P '
set-option -g status-right '#{?client_prefix,#[reverse] ^A #[noreverse],}#[bg=colour239,fg=colour246] %R #[bg=colour248,fg=colour237] #h '
set-option -g status-style bg=colour237,fg=colour223

# Set window status style.
set-option -g window-status-format ' #I:#W#F '
set-option -g window-status-current-format ' #I:#W#F '
set-option -g window-status-separator ''
set-window-option -g window-status-style bg=colour239,fg=colour223
set-window-option -g window-status-activity-style bg=colour237,fg=colour248
set-window-option -g window-status-current-style bg=colour214,fg=colour239,bold
set-window-option -g window-status-bell-style bg=colour167,fg=colour235

# Set pane border style.
set-option -g pane-active-border-style fg=colour250
set-option -g pane-border-style fg=colour237

# Set the message line style.
set-option -g message-style bg=colour239,fg=colour223
set-option -g message-command-style bg=colour239,fg=colour223

# Set the pane number style.
set-option -g display-panes-active-colour colour250
set-option -g display-panes-colour colour237

# Set the clock style.
set-window-option -g clock-mode-colour colour109

# ------------------------------------------------------------------------------
# Key Bindings
# ------------------------------------------------------------------------------

# Enable Vi mode.
set-option -g mode-keys vi

# Global:
#   prefix r        Reload tmux configuration file.
#   prefix t        Show the time.
#   prefix ?        List all key bindings.
#   prefix :        Enter the tmux command prompt.
#   ctrl+l          Clear both screen and history.
bind-key r source-file ~/.tmux.conf \; display-message '~/.tmux.conf reloaded'
bind-key -n C-l send-keys C-l \; run 'sleep 0.1' \; clear-history

# Session:
#   prefix ctrl+c   Create a new session.
#   prefix s        Choose the current session interactively.
#   prefix $        Rename the current session.
#   prefix d        Detach the current client.
#   prefix )        Change to the next session.
#   prefix (        Change to the previous session.
bind-key C-c new-session

# Window:
#   prefix c        Create a new window.
#   prefix w        Choose the current window interactively.
#   prefix n        Change to the next window.
#   prefix p        Change to the previous window.
#   prefix f        Find opened windows.
#   prefix ,        Rename the current window.
#   prefix &        Kill the current window.
bind-key & kill-window

# Pane:
#   prefix |        Split the current pane into two, left and right.
#   prefix -        Split the current pane into two, top and bottom.
#   prefix o        Select the next pane in the current window.
#   prefix q        Briefly display pane indexes.
#   prefix x        Kill the current pane.
#   prefix space    Arrange the current window in the next preset layout.
#   prefix <        Swap the current pane with the previous pane.
#   prefix >        Swap the current pane with the next pane.
#   prefix z        Toggle zoom state of the current pane.
bind-key | split-window -h
bind-key - split-window -v
bind-key x kill-pane
bind-key < swap-pane -U
bind-key > swap-pane -D

# Copy Mode:
#   prefix [        Enter copy mode to copy text or view the history.
#   prefix ]        Paste the most recently copied buffer of text.
#   space           Start selection.
#   esc             Clear selection.
#   enter           Copy selection.
#   q               Quit copy mode.

# ------------------------------------------------------------------------------
# Local Configuration
# ------------------------------------------------------------------------------

# Load `.tmux.conf.local` if it exists.
source-file -q ~/.tmux.conf.local
